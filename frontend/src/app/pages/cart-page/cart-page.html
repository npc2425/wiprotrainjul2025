<div class="cart-page">
 
  
  <main class="cart-main">
    <div class="container">
      <div class="cart-header">
        <h1 class="page-title">Shopping Cart</h1>
        <p class="page-subtitle">Review your items before checkout</p>
      </div>

      <div class="cart-content" *ngIf="cartItems.length > 0; else emptyCart">
        <div class="cart-items-section">
          <div class="cart-items">
            <div class="cart-item" *ngFor="let item of cartItems">
              <div class="item-image">
                <img [src]="item.product.imageURL" [alt]="item.product.prodName" />
              </div>
              
              <div class="item-details">
                <h3 class="item-name">{{ item.product.prodName }}</h3>
                <p class="item-category">{{ item.product.prodCat }}</p>
                <p class="item-description">{{ item.product.prodDesc }}</p>
                
                <div class="item-actions">
                  <div class="quantity-controls">
                    <button 
                      class="qty-btn"
                      (click)="updateQuantity(item.product.id, item.quantity - 1)"
                      [disabled]="item.quantity <= 1"
                    >
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14"/>
                      </svg>
                    </button>
                    <span class="quantity">{{ item.quantity }}</span>
                    <button 
                      class="qty-btn"
                      (click)="updateQuantity(item.product.id, item.quantity + 1)"
                      [disabled]="item.quantity >= item.product.availableQty"
                    >
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                      </svg>
                    </button>
                  </div>
                  
                  <button class="remove-btn" (click)="removeItem(item.product.id)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="3,6 5,6 21,6"/>
                      <path d="m19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2"/>
                    </svg>
                    Remove
                  </button>
                </div>
              </div>
              
              <div class="item-price">
                <span class="price">₹{{ (item.product.price * item.quantity).toFixed(2) }}</span>
                <span class="unit-price">₹{{ item.product.price.toFixed(2) }} each</span>
              </div>
            </div>
          </div>
        </div>

        <div class="cart-summary">
          <div class="summary-card">
            <h3 class="summary-title">Order Summary</h3>
            
            <div class="summary-row">
              <span>Subtotal ({{ cartItems.length }} items)</span>
              <span>₹{{ getSubtotal().toFixed(2) }}</span>
            </div>
            
            <div class="summary-row">
              <span>Shipping</span>
              <span>{{ getShipping() === 0 ? 'Free' : '₹' + getShipping().toFixed(2) }}</span>
            </div>
            
            <div class="summary-row">
              <span>Tax (GST 18%)</span>
              <span>₹{{ getTax().toFixed(2) }}</span>
            </div>
            
            <div class="summary-divider"></div>
            
            <div class="summary-row total">
              <span>Total</span>
              <span>₹{{ getTotal().toFixed(2) }}</span>
            </div>
            
            <div class="summary-actions">
              <button class="checkout-btn" (click)="proceedToCheckout()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 12l2 2 4-4"/>
                </svg>
                Proceed to Checkout
              </button>
              
              <button class="continue-btn" (click)="continueShopping()">
                Continue Shopping
              </button>
              
              <button class="clear-btn" (click)="clearCart()">
                Clear Cart
              </button>
            </div>
          </div>
        </div>
      </div>

      <ng-template #emptyCart>
        <div class="empty-cart">
          <div class="empty-cart-icon">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="8" cy="21" r="1"/>
              <circle cx="19" cy="21" r="1"/>
              <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
            </svg>
          </div>
          <h2 class="empty-title">Your cart is empty</h2>
          <p class="empty-description">Looks like you haven't added any items to your cart yet.</p>
          <button class="shop-now-btn" (click)="continueShopping()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
            Start Shopping
          </button>
        </div>
      </ng-template>
    </div>
  </main>
</div>
