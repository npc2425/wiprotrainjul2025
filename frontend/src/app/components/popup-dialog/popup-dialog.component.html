<div class="dialog-overlay" *ngIf="isVisible" (click)="onOverlayClick($event)">
  <div class="dialog-container" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h2 class="dialog-title">{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h2>
      <button class="close-btn" (click)="onClose()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <form class="dialog-form" (ngSubmit)="onSubmit()" #productForm="ngForm">
      <div class="form-grid">
        <div class="form-group full-width">
          <label for="prodName" class="form-label">Product Name *</label>
          <input
            type="text"
            id="prodName"
            name="prodName"
            class="form-input"
            [(ngModel)]="formData.prodName"
            #prodName="ngModel"
            required
            maxlength="100"
            placeholder="Enter product name"
          />
          <div class="error-message" *ngIf="prodName.invalid && prodName.touched">
            Product name is required
          </div>
        </div>

        <div class="form-group">
          <label for="prodCat" class="form-label">Category *</label>
          <select
            id="prodCat"
            name="prodCat"
            class="form-select"
            [(ngModel)]="formData.prodCat"
            #prodCat="ngModel"
            required
          >
            <option value="">Select category</option>
            <option value="Electronics">Electronics</option>
            <option value="Clothing">Clothing</option>
            <option value="Books">Books</option>
            <option value="Home & Garden">Home & Garden</option>
            <option value="Sports">Sports</option>
            <option value="Toys">Toys</option>
            <option value="Beauty">Beauty</option>
            <option value="Food">Food</option>
          </select>
          <div class="error-message" *ngIf="prodCat.invalid && prodCat.touched">
            Category is required
          </div>
        </div>

        <div class="form-group">
          <label for="price" class="form-label">Price (INR) *</label>
          <input
            type="number"
            id="price"
            name="price"
            class="form-input"
            [(ngModel)]="formData.price"
            #price="ngModel"
            required
            min="0"
            step="0.01"
            placeholder="0.00"
          />
          <div class="error-message" *ngIf="price.invalid && price.touched">
            Valid price is required
          </div>
        </div>

        <div class="form-group">
          <label for="availableQty" class="form-label">Stock Quantity *</label>
          <input
            type="number"
            id="availableQty"
            name="availableQty"
            class="form-input"
            [(ngModel)]="formData.availableQty"
            #availableQty="ngModel"
            required
            min="0"
            placeholder="0"
          />
          <div class="error-message" *ngIf="availableQty.invalid && availableQty.touched">
            Stock quantity is required
          </div>
        </div>

        <div class="form-group full-width">
          <label for="prodDesc" class="form-label">Description *</label>
          <textarea
            id="prodDesc"
            name="prodDesc"
            class="form-textarea"
            [(ngModel)]="formData.prodDesc"
            #prodDesc="ngModel"
            required
            maxlength="500"
            rows="4"
            placeholder="Enter product description"
          ></textarea>
          <div class="error-message" *ngIf="prodDesc.invalid && prodDesc.touched">
            Product description is required
          </div>
        </div>

        <div class="form-group full-width">
          <label for="imageURL" class="form-label">Image URL</label>
          <input
            type="url"
            id="imageUrl"
            name="imageUrl"
            class="form-input"
            [(ngModel)]="formData.imageURL"
            placeholder="https://example.com/image.jpg"
          />
        </div>

        
      </div>

      <div class="dialog-actions">
        <button type="button" class="cancel-btn" (click)="onClose()">
          Cancel
        </button>
        <button 
          type="submit" 
          class="submit-btn"
          [disabled]="isSubmitting"
        >
          <div class="loading-spinner-small" *ngIf="isSubmitting"></div>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" *ngIf="!isSubmitting">
            <polyline points="20,6 9,17 4,12"/>
          </svg>
          {{ isSubmitting ? 'Saving...' : (isEditMode ? 'Update Product' : 'Create Product') }}
        </button>
      </div>
    </form>
  </div>
</div>
